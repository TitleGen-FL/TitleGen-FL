# Code for TitleGen-FL

This is the source code for the paper **"TitleGen-FL: Quality Prediction-based Filter for Automated Issue Title Generation"**.

## Where is our project

Due to file size limitations, we chose to place the project and the pre-training model provided on Google Drive. You can download them from this link:
https://drive.google.com/drive/folders/1jTEfIY6V6f8HySQDCjWrP-3HxpuXdY5s?usp=sharing

## Package Requirement

To run this code, some packages are needed as following:
```
torch==1.5.1
torchtext==0.6.0
nltk==3.6.5
gensim==3.8.3
word2vec==0.9.4
rouge==1.0.0
venn==0.1.3
pandas==1.0.1
numpy==1.21.5
```
and any other else used in project.

## How to prepare the dataset for TitleGen-FL

### The iTAPE dataset (which is used in our paper and of course provided in this project)

This dataset is origined from the paper **"Stay professional and efficient: automatically generate titles for your bug reports"**, which published in ASE 2020, and you can find it in this path: **"./TitleGen-FL/iTAPE_dataset"**. **It is worth noting that the TXT document with".pred" in its name is the title of the corresponding body generated by using the trained iTAPE model, not the file that comes with the iTAPE data set.** We provide our trained models, including iTAPE model, which you can find in this path: **"./pre_trained_models/Itape_step_25000.pt"**. If you need train one new iTAPE model by yourself, you can visit the iTAPE paper project home page on Github.

### If you want to use your own dataset

Follow the format of the data files in **"./TitleGen-FL/iTAPE_dataset"**.

## How to run the code

1. Download the project.
2. Follow the comments in code to do something, such as change the path and parameters, move pretrained .pkl model file to correct folder, and run the **Main.py**.
And, read below instructions. 

### Use our pretrained models
Step 1. copy the model .pkl file you want to use from the folder: **"./pre_trained_models"** and paste it into the folder: **"./TitleGen-FL/done_model"**.
Step 2. If your dataset is iTAPE dataset(such as to reproduce the results of our paper), you need to make sure that the data sets in the **"dataset_train_DL_model"** and **"dataset_train_pos_neg"** folders are exactly the same as those in the corresponding folders in Google Drive.
Step 3. follow the comments, change the content in list **"model_names"**, and comment out the first statement whose first parameter is **'train'**.
Step 4. run the Main.py and get final results in the folder: **"./result_last"**.

### Train new models
First, follow the comments, change the content in list "model_names" into the model name you want(we provide five choices: **'CNN', 'RNN', 'RCNN', 'RNN_Attention', 'Transformer'**), and not comment out the the first statement whose first parameter is **'train'**.
Second, run the **Main.py** and get final results in the folder: **"./TitleGen-FL/result_last"**.

## How long the code need to run
We have introduced the CPU and GPU(RTX 3090) we used in our paper. In fact, under mine circumstance, for DL module, it will cost about 25-45 mins to train a new model or about 5-10 mins to use a pretrained model and get result. For IR module, it will cost at least 1h15min to get the result, to save your time, the IR module result also can find in this path: **"./IR component result"**, to use it, you only need to follow the comments and use the **load_data()** function in utils.tools.py.

## Acknowledgements

I would like to thank my tutor for his guidance, all those who participated in this paper, and all those who read this paper and visited this Github project. Let's strive to make a greater contribution to the field of software engineering. Thank you very much!

## References

For more details about this project, please refer to the "code comments" and our paper **"TitleGen-FL: Quality Prediction-based Filter for Automated Issue Title Generation"**.
